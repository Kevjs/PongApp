<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>Pong App: Game</title>
    <style>
        body {margin:0; background-color: black;overflow:hidden}
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/96/three.js"></script>
    <script>
        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
        var directionalLight = new THREE.DirectionalLight( 0xffffff, 0.5 );
        scene.add( directionalLight );

        var renderer = new THREE.WebGLRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );
        document.body.appendChild( renderer.domElement );

        camera.position.set( 0, 1, 12 );
        camera.lookAt( 0, 0, 0 );
        var bg_light = new THREE.AmbientLight( 0x404040, 2 ); // soft white light
        scene.add( bg_light);
        var point_light = new THREE.PointLight(0x666666,4,1000);
        point_light.translateZ(10);
        point_light.translateY(3);
        scene.add(point_light);

        var left_paddle_geo = new THREE.BoxGeometry( 1, 3, 1 );
        var red_material = new THREE.MeshStandardMaterial( { color: 0xff0000 } );
        var left_paddle = new THREE.Mesh( left_paddle_geo, red_material);
        left_paddle.translateX(-10);
        scene.add(left_paddle);

        var right_paddle_geo= new THREE.BoxGeometry( 1, 3, 1 );
        var right_paddle = new THREE.Mesh( right_paddle_geo, red_material);
        right_paddle.translateX(10);
        right_paddle.translateY(-3);
        scene.add(right_paddle);

        var background_geo = new THREE.BoxGeometry(20, 10, 1);
        var wall_mesh = new THREE.MeshStandardMaterial({color: 0x333333});
        var background_wall = new THREE.Mesh(background_geo, wall_mesh);
        background_wall.translateZ(-1);
        scene.add(background_wall);

        var ball_geo = new THREE.SphereGeometry(0.4);
        var ball_mesh = new THREE.MeshStandardMaterial({color:0x11BB22});
        var ball = new THREE.Mesh(ball_geo, ball_mesh);
        scene.add(ball);
        ball_vx = 4;
        ball_vy = 1;
        var frame_geo = new THREE.RingGeometry(10,11,4,1,3.14159*0.25,6.285);
        var frame_mesh = new THREE.MeshStandardMaterial({color:0x22DD33});
        var frame = new THREE.Mesh(frame_geo, frame_mesh);
        frame.translateZ(-0.45);
        frame.scale.x  = 1.3;
        frame.scale.y = 0.75;
        scene.add(frame);
        var t = 0;
        function collide() {
            var next_x = ball.position.x+ ball_vx*0.05;
            if (9.5 < next_x || next_x < -9.5) {
                ball_vx *= -1;
            }
            var next_y = ball.position.y + ball_vy*0.05;
            if (5 < next_y || next_y < -5) {
                ball_vy *= -1;
            }
        }
        function animate() {
            t += 0.05;
            collide();
            left_paddle.translateY(0.2*Math.cos(t));
            right_paddle.translateY(0.2*Math.cos(t+5));
            ball.translateX(0.05*ball_vx);
            ball.translateY(0.05*ball_vy);
            requestAnimationFrame( animate );
            renderer.render( scene, camera );
        }
        animate();
    </script>
</body>
</html>